services:
  # Static site (deploy-site). Build only life-jet to avoid root npm install (optionalDependencies can fail on Render).
  - type: web
    name: containersuccess007
    runtime: static
    buildCommand: cd deploy-site/life-jet && npm install && npm run build
    staticPublishPath: ./deploy-site
    headers:
      - path: /images/*
        name: Cache-Control
        value: public, max-age=31536000, immutable
      - path: /*.js
        name: Cache-Control
        value: public, max-age=3600
      - path: /public/videos/*
        name: Cache-Control
        value: public, max-age=31536000, immutable
      - path: /life-jet/dist/assets/*
        name: Cache-Control
        value: public, max-age=31536000, immutable
    routes:
      - type: rewrite
        source: /product/:sku
        destination: /product/index.html?sku=:sku
      - type: rewrite
        source: /faq/:sku
        destination: /faq/index.html?sku=:sku
      - type: rewrite
        source: /life-jet
        destination: /life-jet/dist/index.html